---
import Layout from "../../layouts/Layout.astro";
import Header from "../../components/Header.astro";

// Servicios disponibles
const servicios = [
  {
    slug: "agentes-ia",
    title: "Agentes de inteligencia artificial y MCP's",
    description:
      "Transforma tu operación con empleados digitales que trabajan 24/7. Atienden clientes, cualifican leads y ejecutan flujos de trabajo complejos mediante Model Context Protocol (MCP), Langraph y N8N.",
    image: "/img/personaje1/01.png",
    category: "IA",
    featured: true,
  },
  {
    slug: "aplicaciones-ia",
    title: "Apps con integraciones hechas a la medida + IA",
    description:
      "Construimos aplicaciones con inteligencia artificial que integran tus sistemas existentes. APIs, webhooks, automatizaciones y flujos de trabajo personalizados que potencian tu negocio.",
    image: "/img/personaje3/01.png",
    category: "IA",
    featured: true,
  },
  {
    slug: "desarrollo-web",
    title: "Diseño y Desarrollo Web Moderno & Rápido + IA",
    description:
      "Sitios web ultra-rápidos con tecnologías de vanguardia. Optimizados para SEO, conversión y experiencia de usuario excepcional con capacidades de IA integradas.",
    image: "/img/personaje4/01.png",
    category: "Web",
    featured: true,
  },
  {
    slug: "apps-moviles",
    title: "Aplicaciones Nativas & Cross-Platform",
    description:
      "Apps móviles de alto rendimiento para iOS y Android. Desarrollo nativo o cross-platform con React Native, Flutter. Desde MVPs hasta aplicaciones empresariales complejas.",
    image: "/img/personaje5/01.png",
    category: "Mobile",
    featured: false,
  },
  {
    slug: "computer-vision",
    title: "Visión por Computadora hecha a la medida. + IA",
    description:
      "Sistemas inteligentes que ven, analizan y actúan. Detección de objetos, reconocimiento facial, OCR y análisis de video en tiempo real con Deep Learning.",
    image: "/img/personaje7/01.png",
    category: "IA",
    featured: true,
  },
  {
    slug: "arquitectura",
    title: "Arquitectura de Software Escalable & Robusta",
    description:
      "Diseñamos ecosistemas digitales que crecen con tu negocio. Arquitectura empresarial combinando frameworks probados con metodologías ágiles para transformación digital efectiva.",
    image: "/img/personaje6/01.png",
    category: "Profesional",
    featured: true,
  },
  {
    slug: "desarrollo-fullstack",
    title: "Desarrollo Full-Stack",
    description:
      "Soluciones completas con React, Node.js, Python y tecnologías modernas. Desde MVPs hasta plataformas empresariales escalables con arquitecturas cloud-native.",
    image: "/img/personaje9/01.png",
    category: "Profesional",
    featured: true,
  },
  {
    slug: "ia-machine-learning",
    title: "Aprendizaje Automático y por refuerzo + Modelos de IA",
    description:
      "MLOps, modelos predictivos, procesamiento de lenguaje natural y agentes autónomos. Llevamos la IA del laboratorio a producción con ROI medible.",
    image: "/img/personaje8/01.png",
    category: "Profesional",
    featured: false,
  },
  {
    slug: "devops-infraestructura",
    title: "DevOps & Infraestructura Cloud",
    description:
      "CI/CD, contenedores, Kubernetes, serverless y automatización de infraestructura. Reduce costos hasta 40% y despliega 10x más rápido con AWS, Azure o GCP.",
    image: "/img/personaje010/01.png",
    category: "Profesional",
    featured: false,
  },
];

const categories = ["Todos", "IA", "Web", "Mobile", "Profesional"];

const categoryColors: Record<string, string> = {
  IA: "bg-purple-600",
  Web: "bg-blue-600",
  Mobile: "bg-green-600",
  Profesional: "bg-cyan-600",
};
---

<Layout>
  <Header currentPage="servicios" />

  <!-- Hero Section -->
  <section class="pt-32 pb-16 bg-gradient-to-br from-[#00464e] to-[#006064]">
    <div class="container mx-auto px-4 md:px-16">
      <div class="max-w-4xl mx-auto text-center">
        <h1 class="text-4xl md:text-6xl font-bold text-white mb-6">
          Nuestros Servicios
        </h1>
        <p class="text-xl md:text-2xl text-white/90 mb-8">
          Soluciones tecnológicas de vanguardia para impulsar tu negocio.
          Especialistas en IA, desarrollo web y aplicaciones móviles.
        </p>
      </div>
    </div>
  </section>

  <!-- Main Content -->
  <section class="py-16 bg-[#1a1a1a] min-h-screen">
    <div class="container mx-auto px-4 md:px-16">
      <!-- Filtros por categoría -->
      <div
        class="flex flex-wrap justify-center gap-3 mb-12"
        id="category-filters"
      >
        {
          categories.map((category) => (
            <button
              class="category-filter px-6 py-2 rounded-full text-white transition-all duration-300 hover:scale-105"
              class:list={[
                category === "Todos"
                  ? "bg-[#82e256] text-black font-semibold"
                  : "bg-gray-700 hover:bg-gray-600",
              ]}
              data-category={category}
            >
              {category}
            </button>
          ))
        }
      </div>

      <!-- Servicios -->
      <div class="mb-16">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          {
            servicios.map((servicio) => {
              const categoryColor =
                categoryColors[servicio.category] || "bg-gray-600";

              return (
                <article
                  class="service-card spotlight-card bg-gray-800/50 rounded-xl overflow-hidden hover:transform hover:scale-105 transition-all duration-300 border border-gray-700 hover:border-[#82e256] group"
                  data-category={servicio.category}
                >
                  {/* Header con imagen */}
                  <div class="relative h-48 overflow-hidden bg-gray-900">
                    <img
                      src={servicio.image}
                      alt={servicio.title}
                      class="w-full h-full object-contain transition-transform duration-500 group-hover:scale-110"
                    />
                    <span
                      class={`absolute top-4 right-4 ${categoryColor} text-white px-3 py-1 text-xs font-semibold`}
                    >
                      {servicio.category}
                    </span>
                  </div>

                  {/* Contenido */}
                  <div class="p-6">
                    {/* Título */}
                    <h3 class="text-xl font-bold text-white mb-3 line-clamp-2 group-hover:text-[#82e256] transition-colors">
                      {servicio.title}
                    </h3>

                    {/* Descripción */}
                    <p class="text-gray-300 mb-6 line-clamp-4">
                      {servicio.description}
                    </p>

                    {/* Botón */}
                    <a
                      href={`/servicios/${servicio.slug}`}
                      class="inline-flex items-center gap-2 text-[#82e256] font-semibold hover:gap-3 transition-all"
                    >
                      Ver detalles
                      <svg
                        class="w-4 h-4"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M9 5l7 7-7 7"
                        />
                      </svg>
                    </a>
                  </div>
                </article>
              );
            })
          }
        </div>
      </div>

      <!-- CTA -->
      <div
        class="mt-20 max-w-4xl mx-auto p-8 md:p-12 bg-gradient-to-br from-[#00464e] to-[#006064] rounded-2xl text-center"
      >
        <h3 class="text-3xl md:text-4xl font-bold text-white mb-4">
          ¿Listo para transformar tu negocio?
        </h3>
        <p class="text-lg text-white/90 mb-8">
          Agenda una consultoría gratuita y descubre cómo podemos ayudarte a
          alcanzar tus objetivos
        </p>
        <a
          href="/#contenido10"
          class="inline-block px-8 py-4 bg-[#82e256] text-black font-bold rounded-lg hover:bg-[#6bc73d] transition-all duration-300 transform hover:scale-105 text-lg"
        >
          Agendar Consultoría Gratuita
        </a>
      </div>
    </div>
  </section>
</Layout>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    // SpotlightCard Effect - trackear posición del mouse
    const spotlightCards = document.querySelectorAll(".spotlight-card");

    spotlightCards.forEach((card) => {
      card.addEventListener("mousemove", (e) => {
        const rect = card.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;

        card.style.setProperty("--mouse-x", `${x}px`);
        card.style.setProperty("--mouse-y", `${y}px`);
      });
    });

    // Filtrado por categoría
    const filters = document.querySelectorAll(".category-filter");
    const services = document.querySelectorAll(".service-card");

    filters.forEach((filter) => {
      filter.addEventListener("click", () => {
        const category = filter.getAttribute("data-category");

        // Actualizar estilos de los filtros
        filters.forEach((f) => {
          if (f === filter) {
            f.classList.add("bg-[#82e256]", "text-black", "font-semibold");
            f.classList.remove("bg-gray-700");
          } else {
            f.classList.remove("bg-[#82e256]", "text-black", "font-semibold");
            f.classList.add("bg-gray-700");
          }
        });

        // Filtrar servicios
        services.forEach((service) => {
          const serviceCategory = service.getAttribute("data-category");
          if (category === "Todos" || serviceCategory === category) {
            service.style.display = "block";
          } else {
            service.style.display = "none";
          }
        });
      });
    });
  });
</script>

<style>
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-4 {
    display: -webkit-box;
    -webkit-line-clamp: 4;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* SpotlightCard Effect */
  .spotlight-card {
    position: relative;
    overflow: hidden;
    --mouse-x: 50%;
    --mouse-y: 50%;
    --spotlight-color: rgba(130, 226, 86, 0.25);
  }

  .spotlight-card::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--spotlight-color);
    opacity: 0;
    transition: opacity 0.5s ease;
    pointer-events: none;
    z-index: 10;
  }

  .spotlight-card:hover::before {
    opacity: 1;
  }
</style>
