---
import Layout from '../../layouts/Layout.astro';

// Servicios disponibles
const servicios = [
  {
    slug: 'agentes-ia',
    title: 'Agentes Cognitivos Empresariales con IA',
    description: 'Transforma tu operaci√≥n con empleados digitales que trabajan 24/7. Atienden clientes, cualifican leads y ejecutan flujos de trabajo complejos.',
    icon: 'ü§ñ',
    gradient: 'from-[#00464e] to-[#d4e256]',
    category: 'IA',
    featured: true
  },
  {
    slug: 'aplicaciones-ia',
    title: 'Desarrollo de Aplicaciones con IA',
    description: 'Aplicaciones inteligentes que entienden, predicen y personalizan. Integra b√∫squeda sem√°ntica, generaci√≥n de contenido y recomendaciones avanzadas.',
    icon: 'üß†',
    gradient: 'from-[#d4e256] to-[#00464e]',
    category: 'IA',
    featured: true
  },
  {
    slug: 'desarrollo-web',
    title: 'Desarrollo Web Moderno',
    description: 'Sitios web r√°pidos, escalables y preparados para el futuro. Optimizados para conversi√≥n, SEO y experiencia de usuario excepcional.',
    icon: 'üåê',
    gradient: 'from-[#006417] to-[#00464e]',
    category: 'Web',
    featured: true
  },
  {
    slug: 'apps-moviles',
    title: 'Desarrollo de Aplicaciones M√≥viles',
    description: 'Apps nativas e h√≠bridas de clase mundial para iOS y Android. Desde MVPs hasta aplicaciones empresariales complejas.',
    icon: 'üì±',
    gradient: 'from-[#d4e256] to-[#006417]',
    category: 'Mobile',
    featured: false
  },
  {
    slug: 'computer-vision',
    title: 'Computer Vision e IA Visual',
    description: 'Sistemas inteligentes que ven, analizan y act√∫an. Detecci√≥n de objetos, reconocimiento facial, OCR y an√°lisis de video en tiempo real.',
    icon: 'üëÅÔ∏è',
    gradient: 'from-[#006417] to-[#d4e256]',
    category: 'IA',
    featured: true
  }
];

const categories = ['Todos', 'IA', 'Web', 'Mobile'];

const categoryColors: Record<string, string> = {
  'IA': 'bg-purple-600',
  'Web': 'bg-blue-600',
  'Mobile': 'bg-green-600',
};
---

<Layout>
  <!-- Header -->
  <header
    class="bg-[#00464e] flex flex-row justify-between items-center p-3 w-full fixed top-0 left-0 z-50 shadow-[0_2px_10px_rgba(0,0,0,0.5)]"
  >
    <a href="/">
      <img src="/img/logoAquicreamos.png" class="h-7" alt="Logo Aqu√≠ Creamos" />
    </a>
    <nav class="hidden md:block">
      <ul class="flex flex-row gap-6 items-center justify-center">
        <li><a href="/#home" class="text-white hover:text-[#82e256] transition-colors">Inicio</a></li>
        <li><a href="/servicios" class="text-[#82e256] font-semibold">Servicios</a></li>
        <li><a href="/blog" class="text-white hover:text-[#82e256] transition-colors">Blog</a></li>
        <li><a href="/#contenido10" class="text-white hover:text-[#82e256] transition-colors">Contacto</a></li>
      </ul>
    </nav>
  </header>

  <!-- Hero Section -->
  <section class="pt-32 pb-16 bg-gradient-to-br from-[#00464e] to-[#006064]">
    <div class="container mx-auto px-4 md:px-16">
      <div class="max-w-4xl mx-auto text-center">
        <h1 class="text-4xl md:text-6xl font-bold text-white mb-6">
          Nuestros Servicios
        </h1>
        <p class="text-xl md:text-2xl text-white/90 mb-8">
          Soluciones tecnol√≥gicas de vanguardia para impulsar tu negocio. Especialistas en IA, desarrollo web y aplicaciones m√≥viles.
        </p>
      </div>
    </div>
  </section>

  <!-- Main Content -->
  <section class="py-16 bg-[#1a1a1a] min-h-screen">
    <div class="container mx-auto px-4 md:px-16">
      <!-- Filtros por categor√≠a -->
      <div class="flex flex-wrap justify-center gap-3 mb-12" id="category-filters">
        {categories.map((category) => (
          <button
            class="category-filter px-6 py-2 rounded-full text-white transition-all duration-300 hover:scale-105"
            class:list={[
              category === 'Todos'
                ? 'bg-[#82e256] text-black font-semibold'
                : 'bg-gray-700 hover:bg-gray-600'
            ]}
            data-category={category}
          >
            {category}
          </button>
        ))}
      </div>

      <!-- Servicios destacados -->
      <div class="mb-16">
        <h2 class="text-3xl md:text-4xl font-bold text-white mb-8 text-center">
          Servicios Destacados
        </h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          {servicios.filter(s => s.featured).map((servicio) => {
            const categoryColor = categoryColors[servicio.category] || 'bg-gray-600';

            return (
              <article
                class="service-card bg-gray-800/50 rounded-xl overflow-hidden hover:transform hover:scale-105 transition-all duration-300 border border-gray-700 hover:border-[#82e256] group"
                data-category={servicio.category}
              >
                {/* Header con icono y gradiente */}
                <div class={`relative bg-gradient-to-br ${servicio.gradient} p-8 text-center`}>
                  <div class="text-6xl mb-4">{servicio.icon}</div>
                  <span class={`${categoryColor} text-white px-3 py-1 rounded-full text-xs font-semibold`}>
                    {servicio.category}
                  </span>
                </div>

                {/* Contenido */}
                <div class="p-6">
                  {/* T√≠tulo */}
                  <h3 class="text-xl font-bold text-white mb-3 line-clamp-2 group-hover:text-[#82e256] transition-colors">
                    {servicio.title}
                  </h3>

                  {/* Descripci√≥n */}
                  <p class="text-gray-300 mb-6 line-clamp-4">
                    {servicio.description}
                  </p>

                  {/* Bot√≥n */}
                  <a
                    href={`/servicios/${servicio.slug}`}
                    class="inline-flex items-center gap-2 text-[#82e256] font-semibold hover:gap-3 transition-all"
                  >
                    Ver detalles
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                  </a>
                </div>
              </article>
            );
          })}
        </div>
      </div>

      <!-- Todos los servicios -->
      <div>
        <h2 class="text-3xl md:text-4xl font-bold text-white mb-8 text-center">
          Todos los Servicios
        </h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6" id="services-grid">
          {servicios.map((servicio) => {
            const categoryColor = categoryColors[servicio.category] || 'bg-gray-600';

            return (
              <article
                class="service-card bg-gray-800/50 rounded-xl overflow-hidden hover:transform hover:translate-x-2 transition-all duration-300 border border-gray-700 hover:border-[#82e256]"
                data-category={servicio.category}
              >
                <div class="flex flex-row items-center p-6 gap-6">
                  {/* Icono */}
                  <div class={`bg-gradient-to-br ${servicio.gradient} w-20 h-20 rounded-xl flex items-center justify-center text-3xl flex-shrink-0`}>
                    {servicio.icon}
                  </div>

                  {/* Contenido */}
                  <div class="flex-1">
                    <div class="flex items-center gap-3 mb-2">
                      <h3 class="text-lg font-bold text-white">
                        {servicio.title}
                      </h3>
                      <span class={`${categoryColor} text-white px-2 py-1 rounded-full text-xs font-semibold`}>
                        {servicio.category}
                      </span>
                    </div>
                    <p class="text-gray-300 text-sm mb-3 line-clamp-2">
                      {servicio.description}
                    </p>
                    <a
                      href={`/servicios/${servicio.slug}`}
                      class="inline-flex items-center gap-2 text-[#82e256] text-sm font-semibold hover:gap-3 transition-all"
                    >
                      Ver m√°s
                      <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                      </svg>
                    </a>
                  </div>
                </div>
              </article>
            );
          })}
        </div>
      </div>

      <!-- Mensaje cuando no hay servicios -->
      <div id="no-services" class="hidden text-center py-16">
        <div class="text-gray-400 text-xl mb-4">No se encontraron servicios en esta categor√≠a</div>
        <button
          onclick="document.querySelector('[data-category=Todos]').click()"
          class="text-[#82e256] hover:text-[#6bc73d] transition-colors"
        >
          Ver todos los servicios
        </button>
      </div>

      <!-- CTA -->
      <div class="mt-20 max-w-4xl mx-auto p-8 md:p-12 bg-gradient-to-br from-[#00464e] to-[#006064] rounded-2xl text-center">
        <h3 class="text-3xl md:text-4xl font-bold text-white mb-4">
          ¬øListo para transformar tu negocio?
        </h3>
        <p class="text-lg text-white/90 mb-8">
          Agenda una consultor√≠a gratuita y descubre c√≥mo podemos ayudarte a alcanzar tus objetivos
        </p>
        <a
          href="/#contenido10"
          class="inline-block px-8 py-4 bg-[#82e256] text-black font-bold rounded-lg hover:bg-[#6bc73d] transition-all duration-300 transform hover:scale-105 text-lg"
        >
          Agendar Consultor√≠a Gratuita
        </a>
      </div>
    </div>
  </section>
</Layout>

<script>
  // Filtrado por categor√≠a
  document.addEventListener('DOMContentLoaded', () => {
    const filters = document.querySelectorAll('.category-filter');
    const services = document.querySelectorAll('.service-card');
    const noServicesMessage = document.getElementById('no-services');

    filters.forEach(filter => {
      filter.addEventListener('click', () => {
        const category = filter.getAttribute('data-category');

        // Actualizar estilos de los filtros
        filters.forEach(f => {
          if (f === filter) {
            f.classList.add('bg-[#82e256]', 'text-black', 'font-semibold');
            f.classList.remove('bg-gray-700');
          } else {
            f.classList.remove('bg-[#82e256]', 'text-black', 'font-semibold');
            f.classList.add('bg-gray-700');
          }
        });

        // Filtrar servicios
        let visibleCount = 0;
        services.forEach(service => {
          const serviceCategory = service.getAttribute('data-category');
          if (category === 'Todos' || serviceCategory === category) {
            service.style.display = 'block';
            visibleCount++;
          } else {
            service.style.display = 'none';
          }
        });

        // Mostrar/ocultar mensaje de "no hay servicios"
        if (noServicesMessage) {
          if (visibleCount === 0) {
            noServicesMessage.classList.remove('hidden');
          } else {
            noServicesMessage.classList.add('hidden');
          }
        }
      });
    });
  });
</script>

<style>
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-4 {
    display: -webkit-box;
    -webkit-line-clamp: 4;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
