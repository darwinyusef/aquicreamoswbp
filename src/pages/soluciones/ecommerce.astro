---
import Layout from "../../layouts/Layout.astro";
import Header from "../../components/Header.astro";
import ServiciosGrid from "../../components/ServiciosGrid.astro";
import StickySlidesContainer from "../../components/StickySlidesContainer.astro";
import AutomationCard from "../../components/AutomationCard.astro";

const shoppingCartIcon = `<svg class="w-10 h-10 text-[#82e256]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path>
</svg>`;

const chatIcon = `<svg class="w-10 h-10 text-[#82e256]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"></path>
</svg>`;

const socialIcon = `<svg class="w-10 h-10 text-[#82e256]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"></path>
</svg>`;

const emailIcon = `<svg class="w-10 h-10 text-[#82e256]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
</svg>`;

const automations = [
  {
    icon: shoppingCartIcon,
    difficulty: "Intermedio" as const,
    title: "Recuperaci√≥n de Carritos Abandonados",
    description:
      "Estrategia multi-canal para recuperar ventas perdidas con emails personalizados por IA, SMS y WhatsApp.",
    features: [
      "Email personalizado con GPT-4 (1 hora despu√©s)",
      "SMS con urgencia (3 horas despu√©s)",
      "WhatsApp con video de productos (24 horas)",
      "Descuentos din√°micos seg√∫n valor del carrito",
    ],
    benefit: "Recuperaci√≥n automatizada de ventas perdidas",
    technologies: "n8n, GPT-4, Twilio",
  },
  {
    icon: chatIcon,
    difficulty: "Intermedio" as const,
    title: "Chatbot WhatsApp con IA",
    description:
      "Asistente inteligente 24/7 para WhatsApp con memoria contextual y b√∫squeda en base de conocimiento.",
    features: [
      "Integraci√≥n WhatsApp Business API",
      "Base de datos vectorial (Qdrant)",
      "Memoria de conversaci√≥n por usuario",
      "Respuestas sobre productos, env√≠os, devoluciones",
    ],
    benefit: "Atenci√≥n 24/7 con IA",
    technologies: "n8n, GPT-4, Qdrant",
  },
  {
    icon: socialIcon,
    difficulty: "Intermedio" as const,
    title: "Gesti√≥n de Redes Sociales Multi-plataforma",
    description:
      "Publica contenido simult√°neamente en m√∫ltiples plataformas con contenido generado y optimizado por IA.",
    features: [
      "Publicaci√≥n multi-canal (Instagram, Facebook, TikTok)",
      "Adaptaci√≥n de contenido por red social",
      "Generaci√≥n de hashtags con IA",
      "Programaci√≥n de posts autom√°tica",
    ],
    benefit: "Publicaci√≥n multi-canal automatizada",
    technologies: "n8n, GPT-4, APIs",
  },
  {
    icon: emailIcon,
    difficulty: "Intermedio" as const,
    title: "Campa√±as de Email Marketing con IA",
    description:
      "Automatizaci√≥n completa de campa√±as de email con contenido generado por IA y segmentaci√≥n inteligente.",
    features: [
      "Generaci√≥n de contenido con IA",
      "Segmentaci√≥n autom√°tica de audiencias",
      "Personalizaci√≥n por usuario",
      "A/B testing autom√°tico",
    ],
    benefit: "Campa√±as automatizadas con mejor engagement",
    technologies: "n8n, GPT-4, SendGrid",
  },
];

const slidesData = [
  {
    label: "Carritos",
    title: "Recuperaci√≥n<br>Autom√°tica.",
    description:
      "Secuencias multi-canal con emails, SMS y WhatsApp personalizados por IA para recuperar ventas perdidas.",
    icon: "shopping-cart",
    serviceType: "automatizacion" as const,
    reversed: false,
  },
  {
    label: "Chatbot",
    title: "WhatsApp<br>Inteligente.",
    description:
      "Asistente 24/7 con IA que responde consultas, recomienda productos y procesa √≥rdenes autom√°ticamente.",
    icon: "message-circle",
    serviceType: "automatizacion" as const,
    reversed: true,
  },
  {
    label: "Email Marketing",
    title: "Campa√±as<br>con IA.",
    description:
      "Segmentaci√≥n inteligente, contenido generado por IA y optimizaci√≥n autom√°tica de env√≠os y conversiones.",
    icon: "mail",
    serviceType: "automatizacion" as const,
    reversed: false,
  },
  {
    label: "Redes Sociales",
    title: "Publicaci√≥n<br>Autom√°tica.",
    description:
      "Contenido adaptado por red social, publicaci√≥n multi-canal y an√°lisis de engagement con machine learning.",
    icon: "rss",
    serviceType: "automatizacion" as const,
    reversed: true,
  },
  {
    label: "Personalizaci√≥n",
    title: "Experiencia<br>√önica.",
    description:
      "Recomendaciones de productos, precios din√°micos y contenido personalizado basado en comportamiento del usuario.",
    icon: "sparkles",
    serviceType: "servicio" as const,
    reversed: false,
  },
  {
    label: "Analytics",
    title: "Insights<br>Accionables.",
    description:
      "Dashboards en tiempo real, predicci√≥n de ventas y an√°lisis de comportamiento con inteligencia artificial.",
    icon: "bar-chart-2",
    serviceType: "servicio" as const,
    reversed: true,
  },
];
---

<Layout title="Automatizaci√≥n IA para E-commerce - Aqu√≠ Creamos">
  <Header />

  <!-- Hero Section -->
  <section
    class="pt-32 pb-20 bg-gradient-to-br from-[#00464e] via-[#006064] to-[#1a1a1a]"
  >
    <div class="container mx-auto px-4 md:px-16">
      <div class="max-w-6xl mx-auto text-center">
        <div
          class="inline-block mb-4 px-4 py-2 bg-[#82e256]/20 border border-[#82e256] rounded-full"
        >
          <span class="text-[#82e256] font-bold text-sm"
            >E-COMMERCE & RETAIL</span
          >
        </div>

        <h1
          class="text-4xl md:text-6xl font-black text-white mb-6 leading-tight"
        >
          Automatiza tu ecommerce con <span
            class="text-transparent bg-clip-text bg-gradient-to-r from-[#82e256] to-[#04ADC0]"
            >IA</span
          >
        </h1>

        <p class="text-xl text-gray-300 mb-8 max-w-3xl mx-auto">
          Recupera carritos abandonados, personaliza experiencias y aumenta
          conversiones con inteligencia artificial.
        </p>

        <div class="grid grid-cols-3 gap-4 mb-8 max-w-2xl mx-auto">
          <div
            class="bg-white/10 backdrop-blur rounded-lg p-4 border border-white/20"
          >
            <div class="text-sm font-bold text-[#82e256] mb-1">
              Recuperaci√≥n
            </div>
            <div class="text-xs text-gray-300">Carritos abandonados</div>
          </div>
          <div
            class="bg-white/10 backdrop-blur rounded-lg p-4 border border-white/20"
          >
            <div class="text-sm font-bold text-[#82e256] mb-1">Chatbot IA</div>
            <div class="text-xs text-gray-300">Atenci√≥n inmediata</div>
          </div>
          <div
            class="bg-white/10 backdrop-blur rounded-lg p-4 border border-white/20"
          >
            <div class="text-sm font-bold text-[#82e256] mb-1">
              Automatizaci√≥n
            </div>
            <div class="text-xs text-gray-300">Marketing y ventas</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Problem Section -->
  <section class="py-16 bg-[#1a1a1a]">
    <div class="container mx-auto px-4 md:px-16">
      <div class="max-w-6xl mx-auto">
        <div class="text-center mb-12">
          <h2 class="text-3xl md:text-4xl font-black text-white mb-4">
            ¬øTu tienda online pierde dinero sin que te des cuenta?
          </h2>
          <p class="text-xl text-gray-400">
            Estos problemas cuestan miles de d√≥lares cada mes:
          </p>
        </div>

        <div class="grid md:grid-cols-3 gap-6">
          <div class="bg-red-900/20 border border-red-500/30 rounded-xl p-6">
            <h3 class="text-xl font-bold text-white mb-2">
              Carritos Abandonados
            </h3>
            <p class="text-gray-300">
              <strong class="text-red-400">Muchos clientes</strong> abandonan el carrito
              sin comprar
            </p>
          </div>

          <div class="bg-red-900/20 border border-red-500/30 rounded-xl p-6">
            <h3 class="text-xl font-bold text-white mb-2">Respuestas Lentas</h3>
            <p class="text-gray-300">
              Clientes esperan <strong class="text-red-400"
                >demasiado tiempo</strong
              > para respuestas simples
            </p>
          </div>

          <div class="bg-red-900/20 border border-red-500/30 rounded-xl p-6">
            <h3 class="text-xl font-bold text-white mb-2">Marketing Manual</h3>
            <p class="text-gray-300">
              Inviertes <strong class="text-red-400">mucho tiempo</strong> en emails
              y posts
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Sticky Stack Section -->
  <StickySlidesContainer slides={slidesData} />

  <!-- Solutions Section -->
  <section class="py-16 bg-gradient-to-b from-[#1a1a1a] to-[#00464e]">
    <div class="container mx-auto px-4 md:px-16">
      <div class="max-w-6xl mx-auto">
        <div class="text-center mb-12">
          <h2 class="text-3xl md:text-4xl font-black text-white mb-4">
            Automatizaciones IA que transformar√°n tu E-commerce
          </h2>
          <p class="text-xl text-gray-300">
            Soluciones listas para implementar en tu tienda
          </p>
        </div>

        <!-- Workflows Grid -->
        <div class="grid md:grid-cols-2 gap-8">
          {automations.map((automation) => <AutomationCard {...automation} />)}
        </div>

        <!-- CTA -->
        <div class="text-center mt-12">
          <button
            id="open-lead-magnet-2"
            class="inline-block px-10 py-5 bg-gradient-to-r from-[#82e256] to-[#6bc73d] text-black rounded-lg font-bold text-lg hover:shadow-[0_0_40px_rgba(130,226,86,0.6)] transition-all duration-300 hover:scale-105"
          >
            Descargar Gu√≠a: "10 Automatizaciones para E-commerce 2025"
          </button>
          <p class="text-gray-400 mt-3 text-sm">
            Gratis ‚Ä¢ Sin tarjeta ‚Ä¢ Descarga inmediata
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Final CTA -->
  <section class="py-20 bg-gradient-to-br from-[#00464e] to-[#006064]">
    <div class="container mx-auto px-4 md:px-16">
      <div class="max-w-4xl mx-auto text-center">
        <h2 class="text-3xl md:text-5xl font-black text-white mb-6">
          ¬øListo para recuperar ventas perdidas?
        </h2>
        <p class="text-xl text-gray-200 mb-8">
          Agenda una Asesoriagratuita de 30 minutos y te mostramos c√≥mo
          automatizar tu tienda con IA
        </p>

        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a
            #asesorias"
            class="px-10 py-5 bg-gradient-to-r from-[#82e256] to-[#6bc73d] text-black rounded-lg font-bold text-lg hover:shadow-[0_0_40px_rgba(130,226,86,0.6)] transition-all duration-300 hover:scale-105"
          >
            üìÖ Agendar Asesor√≠a Gratuita
          </a>
          <button
            id="open-lead-magnet-3"
            class="px-10 py-5 bg-white/10 backdrop-blur border-2 border-white text-white rounded-lg font-bold text-lg hover:bg-white hover:text-black transition-all duration-300"
          >
            üì• Descargar Gu√≠a Gratis
          </button>
        </div>

        <p class="text-gray-300 mt-6">‚úÖ Sin compromiso ‚Ä¢ ‚úÖ ROI garantizado</p>
      </div>
    </div>
  </section>

  <!-- Lead Magnet Modal -->
  <div
    id="lead-magnet-modal"
    class="hidden fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4"
  >
    <div
      class="bg-gradient-to-br from-[#1a1a1a] to-[#00464e] rounded-2xl max-w-md w-full p-8 border-2 border-[#82e256] relative"
    >
      <button
        id="close-modal"
        class="absolute top-4 right-4 text-gray-400 hover:text-white"
      >
        <svg
          class="w-6 h-6"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>

      <div class="text-center mb-6">
        <h3 class="text-2xl font-black text-white mb-2">
          Gu√≠a Gratuita para E-commerce
        </h3>
        <p class="text-gray-300">
          "10 Automatizaciones con IA que tu Tienda Online Necesita en 2025"
        </p>
      </div>

      <form id="lead-form" class="space-y-4">
        <div>
          <label class="block text-sm font-semibold text-gray-300 mb-2"
            >Nombre completo</label
          >
          <input
            type="text"
            name="nombre"
            required
            class="w-full px-4 py-3 bg-white/10 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#82e256] text-white"
            placeholder="Juan P√©rez"
          />
        </div>

        <div>
          <label class="block text-sm font-semibold text-gray-300 mb-2"
            >Email</label
          >
          <input
            type="email"
            name="email"
            required
            class="w-full px-4 py-3 bg-white/10 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#82e256] text-white"
            placeholder="juan@ejemplo.com"
          />
        </div>

        <div>
          <label class="block text-sm font-semibold text-gray-300 mb-2"
            >Nombre de tu Tienda</label
          >
          <input
            type="text"
            name="empresa"
            required
            class="w-full px-4 py-3 bg-white/10 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#82e256] text-white"
            placeholder="Mi Tienda Online"
          />
        </div>

        <div>
          <label class="block text-sm font-semibold text-gray-300 mb-2"
            >Plataforma E-commerce</label
          >
          <select
            name="plataforma"
            class="w-full px-4 py-3 bg-white/10 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#82e256] text-white"
          >
            <option value="">Selecciona...</option>
            <option value="shopify">Shopify</option>
            <option value="woocommerce">WooCommerce</option>
            <option value="vtex">VTEX</option>
            <option value="magento">Magento</option>
            <option value="tiendanube">TiendaNube</option>
            <option value="otra">Otra</option>
          </select>
        </div>

        <button
          type="submit"
          class="w-full px-8 py-4 bg-gradient-to-r from-[#82e256] to-[#6bc73d] text-black rounded-lg font-bold hover:shadow-[0_0_30px_rgba(130,226,86,0.5)] transition-all duration-300"
        >
          üì• Descargar Gu√≠a Ahora
        </button>

        <p class="text-xs text-gray-400 text-center">
          Al descargar aceptas recibir emails con consejos sobre automatizaci√≥n.
          Puedes cancelar cuando quieras.
        </p>
      </form>
    </div>
  </div>

  <!-- Servicios Profesionales -->
  <ServiciosGrid />
</Layout>

<script>
  // Modal functionality
  const modal = document.getElementById("lead-magnet-modal");
  const openButtons = [
    document.getElementById("open-lead-magnet"),
    document.getElementById("open-lead-magnet-2"),
    document.getElementById("open-lead-magnet-3"),
  ];
  const closeButton = document.getElementById("close-modal");
  const leadForm = document.getElementById("lead-form");

  openButtons.forEach((button) => {
    button?.addEventListener("click", () => {
      modal?.classList.remove("hidden");
      document.body.style.overflow = "hidden";
    });
  });

  closeButton?.addEventListener("click", () => {
    modal?.classList.add("hidden");
    document.body.style.overflow = "auto";
  });

  modal?.addEventListener("click", (e) => {
    if (e.target === modal) {
      modal.classList.add("hidden");
      document.body.style.overflow = "auto";
    }
  });

  // Form submission
  leadForm?.addEventListener("submit", async (e) => {
    e.preventDefault();

    const formData = new FormData(e.target as HTMLFormElement);
    const data = {
      nombre: formData.get("nombre"),
      email: formData.get("email"),
      empresa: formData.get("empresa"),
      plataforma: formData.get("plataforma"),
      industria: "E-commerce",
      leadMagnet: "Gu√≠a 10 Automatizaciones E-commerce 2025",
      timestamp: new Date().toISOString(),
    };

    console.log("Lead capturado:", data);

    // TODO: Aqu√≠ enviar√≠as el lead a tu backend/webhook/n8n
    // Por ahora solo mostramos un alert
    alert(
      "¬°Gracias! Te hemos enviado la gu√≠a a tu email. Revisa tu bandeja de entrada.",
    );

    modal?.classList.add("hidden");
    document.body.style.overflow = "auto";
    (e.target as HTMLFormElement).reset();
  });
</script>
